#!/bin/bash # fractal_root_nuclear_cleanup.sh # Run this ONCE to eliminate all fractal-root conflicts forever echo "🌀 FRACTAL ROOT NUCLEAR CLEANUP" echo "================================" # Define paths GDRIVE_BASE="/Users/$(whoami)/Library/CloudStorage/GoogleDrive-bits.abhi@gmail.com" FRACTAL_MAIN="$GDRIVE_BASE/My Drive/fractal-root" FRACTAL_ENCRYPTED="$GDRIVE_BASE/.Encrypted/My Drive/fractal-root" BACKUP_DIR="$HOME/fractal-root-backup-$(date +%Y%m%d_%H%M%S)" # 1. Create backup echo "📦 Creating backup..." mkdir -p "$BACKUP_DIR" if [ -d "$FRACTAL_MAIN" ]; then cp -r "$FRACTAL_MAIN" "$BACKUP_DIR/main" fi if [ -d "$FRACTAL_ENCRYPTED" ]; then cp -r "$FRACTAL_ENCRYPTED" "$BACKUP_DIR/encrypted" fi # 2. Stop Google Drive sync echo "⏸️ Pausing Google Drive sync..." killall "Google Drive" 2>/dev/null || true # 3. Remove all fractal-root instances echo "🔥 Removing conflict sources..." rm -rf "$FRACTAL_ENCRYPTED" 2>/dev/null || true rm -rf "$HOME/fractal-root" 2>/dev/null || true rm -rf "$HOME/.fractal-root" 2>/dev/null || true # 4. Clean up dot files in fractal-root echo "🧹 Cleaning dot files..." if [ -d "$FRACTAL_MAIN" ]; then find "$FRACTAL_MAIN" -name ".*" -type f -delete 2>/dev/null || true find "$FRACTAL_MAIN" -name ".DS_Store" -delete 2>/dev/null || true fi # 5. Fix permissions echo "🔧 Fixing permissions..." if [ -d "$FRACTAL_MAIN" ]; then chmod -R 755 "$FRACTAL_MAIN" fi # 6. Empty trash echo "🗑️ Emptying trash..." rm -rf ~/.Trash/* 2>/dev/null || true # 7. Create conflict prevention marker echo "🛡️ Creating conflict prevention..." if [ -d "$FRACTAL_MAIN" ]; then echo "# SINGLE SOURCE OF TRUTH - DO NOT DUPLICATE" > "$FRACTAL_MAIN/.fractal-root-guardian" echo "# Created: $(date)" >> "$FRACTAL_MAIN/.fractal-root-guardian" echo "# φ = 1.618033988749895" >> "$FRACTAL_MAIN/.fractal-root-guardian" fi echo "✅ FRACTAL ROOT CONFLICTS ELIMINATED FOREVER" echo "📦 Backup saved to: $BACKUP_DIR" echo "🚀 Restart Google Drive sync manually when ready"
